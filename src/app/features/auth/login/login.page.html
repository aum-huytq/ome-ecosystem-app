<ion-header class="auth-header">
  <ion-toolbar>
    <ion-title>{{ 'AUTH.TITLE' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="auth-page">
  <div class="auth-wrapper">

    <!-- LOGO -->
    <div class="logo">
      <img src="assets/images/logo/e-teaching.png" alt="E-Teaching" />
    </div>

    <!-- CARD -->
    <div class="auth-card">

      <!-- TABS -->
      <div class="auth-tabs">
        <button
          type="button"
          class="tab-btn"
          [class.active]="mode === 'login'"
          (click)="switchMode('login')"
        >
          {{ 'AUTH.LOGIN' | translate }}
        </button>

        <button
          type="button"
          class="tab-btn"
          [class.active]="mode === 'register'"
          (click)="switchMode('register')"
        >
          {{ 'AUTH.REGISTER' | translate }}
        </button>
      </div>

      <!-- ================= LOGIN ================= -->
      <form
        *ngIf="mode === 'login'"
        [formGroup]="loginForm"
        (ngSubmit)="onLogin()"
        autocomplete="off"
        novalidate
      >

        <!-- PHONE -->
        <div class="input">
          <ion-icon name="call-outline"></ion-icon>
          <input
            type="text"
            formControlName="phone"
            [placeholder]="'AUTH.PHONE' | translate"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
          />
        </div>
        <div class="error" *ngIf="isInvalid(loginForm,'phone')">
          {{ 'AUTH.PHONE_REQUIRED' | translate }}
        </div>

        <!-- PASSWORD -->
        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input
            type="password"
            formControlName="password"
            [placeholder]="'AUTH.PASSWORD' | translate"
            autocomplete="new-password"
          />
        </div>
        <div class="error" *ngIf="isInvalid(loginForm,'password')">
          {{ 'AUTH.PASSWORD_RULE' | translate }}
        </div>

        <a class="forgot" (click)="goToForgotPassword()">
          {{ 'AUTH.FORGOT_PASSWORD' | translate }}
        </a>

        <button class="primary-btn" type="submit" [disabled]="isSubmitting">
          {{ 'AUTH.LOGIN' | translate }}
        </button>

        <div class="divider">{{ 'AUTH.OR' | translate }}</div>

        <div class="social">
          <button type="button" (click)="onLoginWithGoogle()">
            <img src="assets/images/icon/google.svg" />
            Google
          </button>

          <button type="button" (click)="onLoginWithFacebook()">
            <img src="assets/images/icon/facebook.svg" />
            Facebook
          </button>
        </div>
      </form>

      <!-- ================= REGISTER ================= -->
      <form
        *ngIf="mode === 'register'"
        [formGroup]="registerForm"
        (ngSubmit)="onRegister()"
        autocomplete="off"
        novalidate
      >

        <!-- FULL NAME -->
        <div class="input">
          <ion-icon name="person-outline"></ion-icon>
          <input
            type="text"
            formControlName="fullName"
            [placeholder]="'AUTH.FULLNAME' | translate"
            autocomplete="off"
          />
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'fullName')">
          {{ 'AUTH.FULLNAME_REQUIRED' | translate }}
        </div>

        <!-- EMAIL (OPTIONAL) -->
        <!-- <div class="input">
          <ion-icon name="mail-outline"></ion-icon>
          <input
            type="email"
            formControlName="email"
            [placeholder]="'AUTH.EMAIL_OPTIONAL' | translate"
            autocomplete="off"
          />
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'email')">
          {{ 'AUTH.EMAIL_INVALID' | translate }}
        </div> -->

        <!-- PHONE + OTP -->
        <div class="input">
          <ion-icon name="call-outline"></ion-icon>
          <input
            type="text"
            formControlName="phone"
            [placeholder]="'AUTH.PHONE' | translate"
            autocomplete="off"
          />
          <button
            type="button"
            class="otp-btn"
            (click)="sendOtp()"
            [disabled]="otpSending"
          >
            {{ 'AUTH.SEND_OTP' | translate }}
          </button>
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'phone')">
          {{ 'AUTH.PHONE_REQUIRED' | translate }}
        </div>

        <!-- OTP -->
        <div class="input">
          <ion-icon name="key-outline"></ion-icon>
          <input
            type="text"
            formControlName="otp_code"
            [placeholder]="'AUTH.OTP' | translate"
            autocomplete="off"
          />
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'otp_code')">
          {{ 'AUTH.OTP_REQUIRED' | translate }}
        </div>

        <!-- PASSWORD -->
        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input
            type="password"
            formControlName="password"
            [placeholder]="'AUTH.PASSWORD' | translate"
            autocomplete="new-password"
          />
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'password')">
          {{ 'AUTH.PASSWORD_RULE' | translate }}
        </div>

        <!-- CONFIRM PASSWORD -->
        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input
            type="password"
            formControlName="confirmPassword"
            [placeholder]="'AUTH.CONFIRM_PASSWORD' | translate"
            autocomplete="new-password"
          />
        </div>
        <div class="error" *ngIf="isInvalid(registerForm,'confirmPassword')">
          {{ 'AUTH.CONFIRM_PASSWORD_REQUIRED' | translate }}
        </div>

        <button class="primary-btn" type="submit" [disabled]="isSubmitting">
          {{ 'AUTH.REGISTER' | translate }}
        </button>

        <div class="divider">{{ 'AUTH.OR' | translate }}</div>

        <div class="social">
          <button type="button" (click)="onRegisterWithGoogle()">
            <img src="assets/images/icon/google.svg" />
            Google
          </button>

          <button type="button" (click)="onRegisterWithFacebook()">
            <img src="assets/images/icon/facebook.svg" />
            Facebook
          </button>
        </div>
      </form>

    </div>
  </div>
</ion-content>
