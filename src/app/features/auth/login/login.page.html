<ion-header class="auth-header">
  <ion-toolbar>
    <ion-title>{{ 'AUTH.TITLE' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="auth-page">
  <div class="auth-wrapper">

    <!-- LOGO -->
    <div class="logo">
      <img src="assets/images/logo/e-teaching.png" alt="E-Teaching" />
    </div>

    <div class="auth-card">

      <!-- TABS -->
      <div class="auth-tabs">
        <button class="tab-btn" [class.active]="mode==='login'" (click)="mode='login'">
          {{ 'AUTH.LOGIN' | translate }}
        </button>
        <button class="tab-btn" [class.active]="mode==='register'" (click)="mode='register'">
          {{ 'AUTH.REGISTER' | translate }}
        </button>
      </div>

      <!-- ================= LOGIN ================= -->
      <form *ngIf="mode==='login'" [formGroup]="loginForm" (ngSubmit)="onLogin()">

        <div class="input">
          <ion-icon name="call-outline"></ion-icon>
          <input formControlName="phone" [placeholder]="'AUTH.PHONE'|translate" />
        </div>
        <div class="error" *ngIf="loginForm.get('phone')?.touched && loginForm.get('phone')?.invalid">
          {{ 'AUTH.PHONE_REQUIRED' | translate }}
        </div>

        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input type="password" formControlName="password" [placeholder]="'AUTH.PASSWORD'|translate" />
        </div>
        <div class="error" *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid">
          {{ 'AUTH.PASSWORD_INVALID' | translate }}
        </div>

        <a class="forgot" (click)="goToForgotPassword()">
          {{ 'AUTH.FORGOT_PASSWORD' | translate }}
        </a>

        <button class="primary-btn" type="submit" [disabled]="isSubmitting">
          {{ 'AUTH.LOGIN' | translate }}
        </button>

        <div class="divider">{{ 'AUTH.LOGIN_WITH' | translate }}</div>

        <div class="social">
          <button type="button" (click)="onLoginWithGoogle()">
            <img src="assets/images/icon/google.svg" /> Google
          </button>
          <button type="button" (click)="onLoginWithFacebook()">
            <img src="assets/images/icon/facebook.svg" /> Facebook
          </button>
        </div>
      </form>

      <!-- ================= REGISTER ================= -->
      <form *ngIf="mode==='register'" [formGroup]="registerForm" (ngSubmit)="onRegister()">

        <div class="input">
          <ion-icon name="person-outline"></ion-icon>
          <input formControlName="fullName" [placeholder]="'AUTH.FULLNAME'|translate" />
        </div>
        <div class="error" *ngIf="registerForm.get('fullName')?.touched && registerForm.get('fullName')?.invalid">
          {{ 'AUTH.REQUIRED' | translate }}
        </div>

        <div class="input">
          <ion-icon name="mail-outline"></ion-icon>
          <input formControlName="email" [placeholder]="'AUTH.EMAIL_OPTIONAL'|translate" />
        </div>

        <div class="input">
          <ion-icon name="call-outline"></ion-icon>
          <input formControlName="phone" [placeholder]="'AUTH.PHONE'|translate" />
          <button type="button" class="otp-btn" (click)="sendOtp()" [disabled]="otpSending">
            {{ 'AUTH.SEND_OTP' | translate }}
          </button>
        </div>

        <div class="input">
          <ion-icon name="key-outline"></ion-icon>
          <input formControlName="otp_code" [placeholder]="'AUTH.OTP'|translate" />
        </div>

        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input type="password" formControlName="password" [placeholder]="'AUTH.PASSWORD'|translate" />
        </div>

        <div class="input">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <input type="password" formControlName="confirmPassword" [placeholder]="'AUTH.CONFIRM_PASSWORD'|translate" />
        </div>

        <button class="primary-btn" type="submit" [disabled]="isSubmitting">
          {{ 'AUTH.REGISTER' | translate }}
        </button>

        <div class="divider">{{ 'AUTH.OR' | translate }}</div>

        <div class="social">
          <button type="button" (click)="onRegisterWithGoogle()">
            <img src="assets/images/icon/google.svg" /> Google
          </button>
          <button type="button" (click)="onRegisterWithFacebook()">
            <img src="assets/images/icon/facebook.svg" /> Facebook
          </button>
        </div>
      </form>

    </div>
  </div>
</ion-content>
